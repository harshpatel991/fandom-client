<div class="row">
<div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1 col-sm-12 col-xs-12">

<div class="row">
    <div class="col-sm-4">
        <img class="show-image" ng-show="!episode.img_filename" ng-src="{{episode.img_url}}"> <!-- Show the show image only if it has been loaded, otherwise display the episode image -->
        <img class="show-image" ng-show="episode.img_filename" src="./data/images/{{episode.img_filename}}">
    </div>

    <div class="col-sm-8">
        <h1>{{episode.name}}</h1>
        {{episode.summary}}
        <hr>
        <b>Air Date: </b> {{episode.air_date}}
        <br>

        <div ng-show="profile"><b>Your Rating: </b><input id="user-rating" type="number" class="rating" step="1" size="xs" data-show-caption="false" data-show-clear="false" data-size="xs" data-rtl="false"></div>
        <b>Average Rating: </b><input id="average-rating" type="number" class="rating" step="1" size="xs" data-show-caption="false" data-show-clear="false" data-size="xs" data-rtl="false" readonly="true">by ({{episode.rating_count}}) Users
    </div>
</div>

<div class="row">
    <div class="col-sm-12">
        <h2>Comments</h2>
        <!-- Add parent Comment -->
        <button class="btn btn-default pull-right" ng-click="clickReply(-1)" ng-show="profile">Reply</button>
        <a class="btn btn-default pull-right" ng-show="!profile" href="#/login">Login To Comment</a> <br>

        <div ng-show="showParentReplyBox">
            <textarea ng-model="parentReplyBoxText" rows="8" class="form-control episode-textarea" placeholder="Your reply..."></textarea>
            <button ng-click="submitParentComment(-1)" class="btn btn-primary btn-sm">Submit</button>
            <button ng-click="hideCommentBox(-1)" class="btn btn-danger btn-sm">Cancel</button>
        </div>

        <div ng-show="comments.length == 0">
            <h2 class="text-center">No comments here :( <br>
            Post a comment to start a conversation. </h2>
        </div>

        <!-- All the comment -->
        <div ng-repeat="parentcomment in comments" class="comment-parent" ng-if="parentcomment.parent_id == -1">
            <div>
                <div>{{parentcomment.text}}</div>
                <div>{{parentcomment.post_time}}</div>
            </div>

            <!-- reply button -->
            <button ng-click="clickReply($index)" class="btn btn-primary btn-sm" ng-show="profile">Reply</button>
            <!-- reply box -->
            <div ng-show="showChildReplyBox[$index]">
                <textarea ng-model="replyBoxText[$index]" rows="8" class="form-control episode-textarea" placeholder="Your reply..."></textarea>
                <button ng-click="submitReplyComment($index)" class="btn btn-primary btn-sm">Submit</button>
                <button ng-click="hideCommentBox($index)" class="btn btn-danger btn-sm">Cancel</button>
            </div>

            <div ng-repeat="childcomment in comments" class="comment-child" ng-if="childcomment.parent_id == parentcomment._id">
                <button ng-click="points(childcomment._id,'increase')">Good</button>{{childcomment.points}}<button ng-click="points(childcomments._id, 'decrease')">Suck</button>
                {{childcomment.text}} <br>
                <h6>{{childcomment.post_time}}</h6>

            </div>


        </div>


    </div>
</div>
</div>
</div>